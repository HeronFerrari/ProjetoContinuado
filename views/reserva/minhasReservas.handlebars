<div class="container mt-4">
  <h2 class="mb-4">Minhas Reservas</h2>

  {{#if reservas.length}}
    <p>Aqui estão os livros que você reservou. Você será notificado quando eles estiverem disponíveis.</p>
    <div class="list-group shadow-sm">
      {{#each reservas}}
        <div class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <h5 class="mb-1">"{{Livro.titulo}}"</h5>
            <small>Reservado em: {{formatarData data_reserva}}</small>
          </div>
          
          <div>
           {{#if (eq status 'ATIVA')}}
             <span class="badge bg-primary">Na Fila</span>
           {{else if (eq status 'AGUARDANDO_RETIRADA')}}
             <span class="badge bg-success">Aguardando Retirada</span>
           {{else if (eq status 'ATENDIDA')}}
             <span class="badge bg-info">Atendida</span>
           {{else if (eq status 'CANCELADA')}}
             <span class="badge bg-secondary">Cancelada</span>
           {{else if (eq status 'EXPIRADA')}}
             <span class="badge bg-danger">Expirada</span>
           {{else}}
             <span class="badge bg-dark">{{status}}</span>
           {{/if}}
           {{#if (eq status 'ATIVA')}}
              <form action="/reserva/delete" method="POST" style="display:inline;" onsubmit="return confirm('Tem certeza que deseja cancelar esta reserva?');">
                <input type="hidden" name="id_reserva" value="{{id_reserva}}">
                <button type="submit" class="btn btn-sm btn-outline-danger">Cancelar Reserva</button>
              </form>
            {{/if}}
          </div>
        </div>
      {{/each}}
    </div>
  {{else}}
    <div class="alert alert-info">
      Você não possui reservas ativas no momento.
    </div>
  {{/if}}

  <a href="/home" class="btn btn-secondary mt-4">Voltar</a>
</div>